{"version":3,"file":"static/js/948.a6cb03e3.chunk.js","mappings":"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","sources":["components/CartPopup/CartItem/ConfirmDelete/ConfirmDelete.jsx","components/CartPopup/CartItem/CartItem.jsx","components/ConfirmOrderPopup/ConfirmOrderPopup.jsx","components/OrderPopup/OrderPopup.jsx","components/CartPopup/OrderTable/OrderTable.jsx","components/CartPopup/CartPopup.jsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport gsap from \"gsap\";\nimport \"./ConfirmDelete.css\";\n\nexport default function ConfirmDelete({ isOpen, handleClose, handleDelete }) {\n  const popup = useRef(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      gsap.to(popup.current, {\n        display: \"flex\",\n        height: \"100%\",\n      });\n    } else {\n      gsap.to(popup.current, {\n        display: \"none\",\n        height: 0,\n      });\n    }\n  }, [isOpen]);\n\n  return (\n    <div className=\"confirm-delete\" ref={popup}>\n      <div className=\"confirm-delete__content\">\n        <p className=\"confirm-delete__question\">Удалить из корзины ?</p>\n        <button\n          className=\"confirm-delete__button confirm-delete__button_yes\"\n          type=\"button\"\n          onClick={handleDelete}\n        >\n          ДА\n        </button>\n        <button\n          className=\"confirm-delete__button confirm-delete__button_no\"\n          type=\"button\"\n          onClick={handleClose}\n        >\n          НЕТ\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { React, useContext, useState } from \"react\";\nimport CartContext from \"../../../context/CartContext\";\nimport \"./CartItem.css\";\nimport ConfirmDelete from \"./ConfirmDelete/ConfirmDelete\";\n\nexport default function CartItem({ item }) {\n  const {\n    increaseItemCount,\n    decreaseItemCount,\n    deleteFromCart,\n    setCartIsOpen,\n    cartItems,\n  } = useContext(CartContext);\n  const [popupOpened, setPopupOpened] = useState(false);\n\n  const closePopup = () => {\n    setPopupOpened(false);\n  };\n\n  const confirmDelete = () => {\n    if (cartItems.length === 1) {\n      setCartIsOpen(false);\n    }\n\n    deleteFromCart(item);\n  };\n\n  const increaseCount = () => {\n    increaseItemCount(item);\n  };\n\n  const decreaseCount = () => {\n    if (item.count === 1) {\n      setPopupOpened(true);\n    } else {\n      decreaseItemCount(item);\n    }\n  };\n\n  return (\n    <li className=\"cart-item\">\n      <div className=\"cart-item__description\">\n        <p className=\"cart-item__text\">{item.type}</p>\n        <p className=\"cart-item__text\">{item.name}</p>\n\n        <p className=\"cart-item__text\">\n          {item.material === \"gold\" ? \"золото 585\" : \"серебро 925\"}\n        </p>\n        <p className=\"cart-item__text\">{item.gems}</p>\n        <p className=\"cart-item__text\">{`${item.size} мм`}</p>\n        <p className=\"cart-item__text\">{`${item.weight} гр`}</p>\n      </div>\n\n      <img\n        className=\"cart-item__image\"\n        src={`/items/${item.article}_${item.material}.webp`}\n        alt={item.name}\n      />\n\n      <div className=\"cart-item__counter\">\n        <div className=\"counter\">\n          <div className=\"counter__elements\">\n            <button\n              className=\"counter__element counter__button\"\n              onClick={decreaseCount}\n              type=\"button\"\n            >\n              -\n            </button>\n            <p className=\"counter__element\">{item.count}</p>\n            <button\n              className=\"counter__element counter__button\"\n              onClick={increaseCount}\n              type=\"button\"\n            >\n              +\n            </button>\n          </div>\n          <p className=\"counter__total\">{`${item.price * item.count} р`}</p>\n        </div>\n      </div>\n      <ConfirmDelete\n        isOpen={popupOpened}\n        handleClose={closePopup}\n        handleDelete={confirmDelete}\n      />\n    </li>\n  );\n}\n","import \"./ConfirmOrderPopup.css\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function ConfirmOrderPopup({ isOpen }) {\n  const onButtonClick = () => {\n    location.reload();\n  };\n\n  return (\n    <div\n      className={`confirm-order-popup ${\n        isOpen && \"confirm-order-popup_opened\"\n      }`}\n    >\n      <div className=\"#\" />\n      <p className=\"confirm-order-popup__text\">\n        Заказ\n        <br />\n        оформлен\n      </p>\n      <div className=\"confirm-order-popup__checkmark\" />\n      <p className=\"confirm-order-popup__message\">\n        В ближайшее время с вами свяжется наш менеджер. Спасибо за заказ!\n      </p>\n      <button\n        type=\"button\"\n        className=\"confirm-order-popup__button\"\n        onClick={onButtonClick}\n      >\n        <Link className=\"confirm-order-popup__button-text\" to=\"/catalogue\">\n          в икОнОтеку\n        </Link>\n        <div className=\"confirm-order-popup__button-image\" />\n      </button>\n    </div>\n  );\n}\n","import { useRef, React, useState, useContext, useEffect } from \"react\";\nimport CartContext from \"../../context/CartContext\";\nimport ConfirmOrderPopup from \"../ConfirmOrderPopup/ConfirmOrderPopup\";\nimport \"./OrderPopup.css\";\nimport WindowContext from \"../../context/WindowContext\";\nimport { sendOrder } from \"../../utils/api\";\n\nexport default function OrderPopup({ isOpen, switchPopup }) {\n  const popup = useRef();\n  const windowWidth = useContext(WindowContext);\n  const breakpoint = 1024;\n  const [confirmOrderOpened, setConfirmOrderOpened] = useState(false);\n  const { totalPrice, cartItems, setCartItems } = useContext(CartContext);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSwitchPopup = () => {\n    switchPopup();\n  };\n\n  const setErrorMessage = (msg) => {\n    const errorField = popup.current.querySelector(\n      \".order-popup__confirm-button\"\n    );\n\n    errorField.textContent = msg;\n\n    setTimeout(() => (errorField.textContent = \"Оставить заявку\"), 1500);\n  };\n\n  const hadleSubmit = (evt) => {\n    evt.preventDefault();\n\n    const bill = {\n      customer: {\n        name: evt.target.name.value,\n        email: evt.target.email.value,\n        number: evt.target.number.value,\n        order_text: evt.target.wishes.value,\n      },\n      order: cartItems,\n    };\n\n    setIsLoading(true);\n\n    sendOrder(bill)\n      .then((res) => {\n        if (res.message === \"email send!\") {\n          setConfirmOrderOpened(true);\n          popup.current.classList.add(\"order-popup_fullscreen\");\n          setCartItems([]);\n        } else {\n          setErrorMessage(\"Что-то пошло не так... \");\n        }\n      })\n      .catch(() => {\n        setErrorMessage(\"Что-то пошло не так...\");\n      })\n      .finally(() => setIsLoading(false));\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      setConfirmOrderOpened(false);\n    }\n  }, [isOpen]);\n\n  return (\n    <div\n      className={`order-popup ${isOpen && \"order-popup_opened\"}`}\n      ref={popup}\n    >\n      {isOpen && (\n        <button\n          className=\"order-popup__close-button\"\n          type=\"button\"\n          onClick={handleSwitchPopup}\n          aria-label=\"Закрыть\"\n        />\n      )}\n      {windowWidth >= breakpoint ? (\n        <p className=\"order-button__policy-agreement\">\n          Продолжая, вы соглашаетесь на обработку персональных данных в\n          соответсвии\n          <br />с{\" \"}\n          <span className=\"order-popup__span-text\">\n            политикой конфиденциальности\n          </span>\n        </p>\n      ) : (\n        <button\n          className=\"order-popup__price-button\"\n          onClick={handleSwitchPopup}\n          type=\"button\"\n          disabled={cartItems.length === 0}\n        >\n          <p className=\"order-popup__price\">{`${totalPrice} р`}</p>\n          <h3 className=\"order-popup__text\">\n            {cartItems.length === 0 ? \"Корзина пуста\" : \"Оформить заказ\"}\n          </h3>\n        </button>\n      )}\n\n      <form\n        className=\"order-popup__form\"\n        name=\"order\"\n        onSubmit={hadleSubmit}\n        method=\"POST\"\n      >\n        <input\n          className=\"order-popup__input\"\n          name=\"name\"\n          type=\"text\"\n          placeholder=\"Как вас зовут\"\n          min={2}\n          max={30}\n          required\n        />\n        <input\n          className=\"order-popup__input\"\n          name=\"number\"\n          type=\"tel\"\n          placeholder=\"Телефон\"\n          required\n        />\n        <input\n          className=\"order-popup__input\"\n          name=\"email\"\n          type=\"email\"\n          placeholder=\"Почта\"\n          required\n        />\n        <textarea\n          className=\"order-popup__input order-popup__input_type_textarea\"\n          name=\"wishes\"\n          placeholder=\"Здесь вы можете оставить свои пожелания к заказу\"\n        />\n        <button\n          className=\"order-popup__confirm-button\"\n          type=\"submit\"\n          disabled={isLoading}\n        >\n          Оставить\n          <br />\n          заявку\n        </button>\n      </form>\n      <ConfirmOrderPopup isOpen={confirmOrderOpened} />\n    </div>\n  );\n}\n","import React, { useContext } from \"react\";\nimport CartContext from \"../../../context/CartContext\";\nimport \"./OrderTable.css\";\n\nexport default function OrderTable({ handleButtonClick }) {\n  const { totalPrice, cartItems } = useContext(CartContext);\n  return (\n    <div className=\"order-table\">\n      <button\n        className=\"order-table__order-button\"\n        type=\"button\"\n        onClick={handleButtonClick}\n        disabled={cartItems.length === 0}\n      >\n        <p className=\"order-table__text order-table__text_big\">\n          {cartItems.length === 0 ? \"Корзина пуста\" : \"Оформить заказ\"}\n        </p>\n        <p className=\"order-table__text order-table__text_small\">\n          {totalPrice} р\n        </p>\n      </button>\n    </div>\n  );\n}\n","import { React, useContext, useEffect, useRef, useState } from \"react\";\nimport gsap from \"gsap\";\nimport CartContext from \"../../context/CartContext\";\nimport Header from \"../Header/Header\";\nimport \"./CartPopup.css\";\nimport Item from \"./CartItem/CartItem\";\nimport OrderPopup from \"../OrderPopup/OrderPopup\";\nimport closeButton from \"../../images/close-gold.svg\";\nimport OrderTable from \"./OrderTable/OrderTable\";\n\nexport default function CartPopup() {\n  const { cartIsOpen, setCartIsOpen, cartItems } = useContext(CartContext);\n  const popup = useRef(null);\n  const [isOrderPopupOpened, setIsOrderPopupOpened] = useState(false);\n\n  const handleClosePopup = () => {\n    setCartIsOpen(false);\n  };\n\n  const switchOrderPopup = () => {\n    setIsOrderPopupOpened(!isOrderPopupOpened);\n  };\n\n  useEffect(() => {\n    if (cartIsOpen) {\n      gsap.to(popup.current, {\n        opacity: 1,\n        display: \"block\",\n      });\n    } else {\n      gsap.to(popup.current, {\n        opacity: 0,\n        display: \"none\",\n      });\n    }\n\n    setIsOrderPopupOpened(false);\n  }, [cartIsOpen]);\n\n  return (\n    <div\n      className=\"cart-popup animate-bg\"\n      ref={popup}\n      onScroll={(evt) => evt.stopPropagation()}\n    >\n      <Header\n        buttonImage={closeButton}\n        buttonHandler={handleClosePopup}\n        text=\"коРЗИНА\"\n      />\n      <ul className=\"cart-popup__items\">\n        {cartItems.map((item) => (\n          <Item key={item.article + item.material + item.size} item={item} />\n        ))}\n      </ul>\n      <OrderTable handleButtonClick={switchOrderPopup} />\n      <OrderPopup isOpen={isOrderPopupOpened} switchPopup={switchOrderPopup} />\n    </div>\n  );\n}\n"],"names":["ConfirmDelete","isOpen","handleClose","handleDelete","popup","useRef","useEffect","gsap","current","display","height","className","ref","type","onClick","CartItem","item","useContext","CartContext","increaseItemCount","decreaseItemCount","deleteFromCart","setCartIsOpen","cartItems","useState","popupOpened","setPopupOpened","name","material","gems","size","weight","src","article","alt","count","price","length","ConfirmOrderPopup","location","reload","to","OrderPopup","switchPopup","windowWidth","WindowContext","confirmOrderOpened","setConfirmOrderOpened","totalPrice","setCartItems","isLoading","setIsLoading","handleSwitchPopup","setErrorMessage","msg","errorField","querySelector","textContent","setTimeout","disabled","onSubmit","evt","preventDefault","bill","customer","target","value","email","number","order_text","wishes","order","sendOrder","then","res","message","classList","add","catch","finally","method","placeholder","min","max","required","OrderTable","handleButtonClick","CartPopup","cartIsOpen","isOrderPopupOpened","setIsOrderPopupOpened","switchOrderPopup","opacity","onScroll","stopPropagation","Header","buttonImage","closeButton","buttonHandler","text","map"],"sourceRoot":""}