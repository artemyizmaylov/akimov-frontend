"use strict";(self.webpackChunkakimov_frontend_2=self.webpackChunkakimov_frontend_2||[]).push([[948],{3259:function(e,t,n){n(2791);t.Z=n.p+"static/media/close-gold.8789edd0e8b5b709cbe5921807012033.svg"},4206:function(e,t,n){n(2791);t.Z=n.p+"static/media/spark-gold.bba2288613448ba721c47bb47bd7d64e.svg"},1948:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s=n(885),a=n(2791),r=n(5331),c=n(4648),o=n(7362),l=n(184);function i(e){var t=e.isOpen,n=e.handleClose,s=e.handleDelete,c=(0,a.useRef)(null);return(0,a.useEffect)((function(){t?r.ZP.to(c.current,{display:"flex",height:"100%"}):r.ZP.to(c.current,{display:"none",height:0})}),[t]),(0,l.jsx)("div",{className:"confirm-delete",ref:c,children:(0,l.jsxs)("div",{className:"confirm-delete__content",children:[(0,l.jsx)("p",{className:"confirm-delete__question",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b ?"}),(0,l.jsx)("button",{className:"confirm-delete__button confirm-delete__button_yes",type:"button",onClick:s,children:"\u0414\u0410"}),(0,l.jsx)("button",{className:"confirm-delete__button confirm-delete__button_no",type:"button",onClick:n,children:"\u041d\u0415\u0422"})]})})}function u(e){var t=e.item,n=(0,a.useContext)(c.Z),r=n.increaseItemCount,o=n.decreaseItemCount,u=n.deleteFromCart,d=n.setCartIsOpen,p=n.cartItems,m=(0,a.useState)(!1),_=(0,s.Z)(m,2),x=_[0],f=_[1];return(0,l.jsxs)("li",{className:"cart-item",children:[(0,l.jsxs)("div",{className:"cart-item__description",children:[(0,l.jsx)("p",{className:"cart-item__text",children:t.type}),(0,l.jsx)("p",{className:"cart-item__text",children:t.name}),(0,l.jsx)("p",{className:"cart-item__text",children:"gold"===t.material?"\u0437\u043e\u043b\u043e\u0442\u043e 585":"\u0441\u0435\u0440\u0435\u0431\u0440\u043e 925"}),(0,l.jsx)("p",{className:"cart-item__text",children:t.gems}),(0,l.jsx)("p",{className:"cart-item__text",children:"".concat(t.size," \u043c\u043c")}),(0,l.jsx)("p",{className:"cart-item__text",children:"".concat(t.weight," \u0433\u0440")})]}),(0,l.jsx)("img",{className:"cart-item__image",src:"/items/".concat(t.article,"_").concat(t.material,".webp"),alt:t.name}),(0,l.jsx)("div",{className:"cart-item__counter",children:(0,l.jsxs)("div",{className:"counter",children:[(0,l.jsxs)("div",{className:"counter__elements",children:[(0,l.jsx)("button",{className:"counter__element counter__button",onClick:function(){1===t.count?f(!0):o(t)},type:"button",children:"-"}),(0,l.jsx)("p",{className:"counter__element",children:t.count}),(0,l.jsx)("button",{className:"counter__element counter__button",onClick:function(){r(t)},type:"button",children:"+"})]}),(0,l.jsx)("p",{className:"counter__total",children:"".concat(t.price*t.count," \u0440")})]})}),(0,l.jsx)(i,{isOpen:x,handleClose:function(){f(!1)},handleDelete:function(){1===p.length&&d(!1),u(t)}})]})}var d=n(3504);function p(e){var t=e.isOpen;return(0,l.jsxs)("div",{className:"confirm-order-popup ".concat(t&&"confirm-order-popup_opened"),children:[(0,l.jsx)("div",{className:"#"}),(0,l.jsxs)("p",{className:"confirm-order-popup__text",children:["\u0417\u0430\u043a\u0430\u0437",(0,l.jsx)("br",{}),"\u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d"]}),(0,l.jsx)("div",{className:"confirm-order-popup__checkmark"}),(0,l.jsx)("p",{className:"confirm-order-popup__message",children:"\u0412 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0441 \u0432\u0430\u043c\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u043d\u0430\u0448 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440. \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437!"}),(0,l.jsxs)("button",{type:"button",className:"confirm-order-popup__button",onClick:function(){location.reload()},children:[(0,l.jsx)(d.rU,{className:"confirm-order-popup__button-text",to:"/catalogue",children:"\u0432 \u0438\u043a\u041e\u043d\u041e\u0442\u0435\u043a\u0443"}),(0,l.jsx)("div",{className:"confirm-order-popup__button-image"})]})]})}var m=n(7590),_=n(3335);function x(e){var t=e.isOpen,n=e.switchPopup,r=(0,a.useRef)(),o=(0,a.useContext)(m.Z),i=(0,a.useState)(!1),u=(0,s.Z)(i,2),d=u[0],x=u[1],f=(0,a.useContext)(c.Z),h=f.totalPrice,b=f.cartItems,j=f.setCartItems,N=(0,a.useState)(!1),v=(0,s.Z)(N,2),g=v[0],C=v[1],y=function(){n()},k=function(e){var t=r.current.querySelector(".order-popup__confirm-button");t.textContent=e,setTimeout((function(){return t.textContent="\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"}),1500)};return(0,a.useEffect)((function(){t&&x(!1)}),[t]),(0,l.jsxs)("div",{className:"order-popup ".concat(t&&"order-popup_opened"),ref:r,children:[t&&(0,l.jsx)("button",{className:"order-popup__close-button",type:"button",onClick:y,"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),o>=1024?(0,l.jsxs)("p",{className:"order-button__policy-agreement",children:["\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u044f, \u0432\u044b \u0441\u043e\u0433\u043b\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044c \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0432\u0438\u0438",(0,l.jsx)("br",{}),"\u0441"," ",(0,l.jsx)("span",{className:"order-popup__span-text",children:"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"})]}):(0,l.jsxs)("button",{className:"order-popup__price-button",onClick:y,type:"button",disabled:0===b.length,children:[(0,l.jsx)("p",{className:"order-popup__price",children:"".concat(h," \u0440")}),(0,l.jsx)("h3",{className:"order-popup__text",children:0===b.length?"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),(0,l.jsxs)("form",{className:"order-popup__form",name:"order",onSubmit:function(e){e.preventDefault();var t={customer:{name:e.target.name.value,email:e.target.email.value,number:e.target.number.value,order_text:e.target.wishes.value},order:b};C(!0),(0,_.g)(t).then((function(e){"email send!"===e.message?(x(!0),r.current.classList.add("order-popup_fullscreen"),j([])):k("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... ")})).catch((function(){k("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a...")})).finally((function(){return C(!1)}))},method:"POST",children:[(0,l.jsx)("input",{className:"order-popup__input",name:"name",type:"text",placeholder:"\u041a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442",min:2,max:30,required:!0}),(0,l.jsx)("input",{className:"order-popup__input",name:"number",type:"tel",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",required:!0}),(0,l.jsx)("input",{className:"order-popup__input",name:"email",type:"email",placeholder:"\u041f\u043e\u0447\u0442\u0430",required:!0}),(0,l.jsx)("textarea",{className:"order-popup__input order-popup__input_type_textarea",name:"wishes",placeholder:"\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f \u043a \u0437\u0430\u043a\u0430\u0437\u0443"}),(0,l.jsxs)("button",{className:"order-popup__confirm-button",type:"submit",disabled:g,children:["\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c",(0,l.jsx)("br",{}),"\u0437\u0430\u044f\u0432\u043a\u0443"]})]}),(0,l.jsx)(p,{isOpen:d})]})}var f=n(3259);function h(e){var t=e.handleButtonClick,n=(0,a.useContext)(c.Z),s=n.totalPrice,r=n.cartItems;return(0,l.jsx)("div",{className:"order-table",children:(0,l.jsxs)("button",{className:"order-table__order-button",type:"button",onClick:t,disabled:0===r.length,children:[(0,l.jsx)("p",{className:"order-table__text order-table__text_big",children:0===r.length?"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),(0,l.jsxs)("p",{className:"order-table__text order-table__text_small",children:[s," \u0440"]})]})})}function b(){var e=(0,a.useContext)(c.Z),t=e.cartIsOpen,n=e.setCartIsOpen,i=e.cartItems,d=(0,a.useRef)(null),p=(0,a.useState)(!1),m=(0,s.Z)(p,2),_=m[0],b=m[1],j=function(){b(!_)};return(0,a.useEffect)((function(){t?r.ZP.to(d.current,{opacity:1,display:"block"}):r.ZP.to(d.current,{opacity:0,display:"none"}),b(!1)}),[t]),(0,l.jsxs)("div",{className:"cart-popup animate-bg",ref:d,onScroll:function(e){return e.stopPropagation()},children:[(0,l.jsx)(o.Z,{buttonImage:f.Z,buttonHandler:function(){n(!1)},text:"\u043a\u043e\u0420\u0417\u0418\u041d\u0410"}),(0,l.jsx)("ul",{className:"cart-popup__items",children:i.map((function(e){return(0,l.jsx)(u,{item:e},e.article+e.material+e.size)}))}),(0,l.jsx)(h,{handleButtonClick:j}),(0,l.jsx)(x,{isOpen:_,switchPopup:j})]})}},7362:function(e,t,n){n.d(t,{Z:function(){return m}});var s=n(885),a=n(2791),r=n(4648),c=n(5331),o=n(7590),l=n(184);function i(){var e=(0,a.useRef)(null),t=(0,a.useContext)(o.Z),n=(0,a.useState)(!0),r=(0,s.Z)(n,2),i=r[0],u=r[1],d={transform:"translateX(0)",display:"flex",ease:"back.inOut",duration:.9};return(0,a.useEffect)((function(){i?(d.transform="translateX(-100%)",d.display="none"):(d.transform="translateX(0)",d.display="flex"),c.p8.to(".menu",d)}),[i]),(0,a.useEffect)((function(){return t<1024?function(){d.transform="translateX(0)",d.display="flex",c.p8.to(".menu",d)}:function(){d.transform="translateX(-100%)",d.display="none",c.p8.to(".menu",d)}}),[]),(0,l.jsx)("button",{ref:e,className:"menu-button header__button",type:"button",onClick:function(){t<1024&&u(!i)},children:"\u2261"})}var u=n(4206),d=n(6871);function p(){var e=(0,d.s0)();return(0,l.jsxs)("button",{className:"backward-button",onClick:function(){return e(-1)},children:[(0,l.jsx)("img",{className:"backward-button__image",src:u.Z,alt:""}),"\u041d\u0430\u0437\u0430\u0434"]})}function m(e){var t=e.text,n=e.subtext,c=e.buttonHandler,u=e.buttonImage,d=e.withMenuButton,m=(0,a.useContext)(r.Z),_=m.cartItems,x=m.setCartIsOpen,f=(0,a.useState)(0),h=(0,s.Z)(f,2),b=h[0],j=h[1],N=(0,a.useContext)(o.Z),v=(0,a.useState)(N<1024?(0,l.jsx)(i,{}):(0,l.jsx)(p,{})),g=(0,s.Z)(v,2),C=g[0],y=g[1];return(0,a.useEffect)((function(){var e=0;_.forEach((function(t){e=t.count+e})),j(e)}),[_]),(0,a.useEffect)((function(){y(N<1024?(0,l.jsx)(i,{}):(0,l.jsx)(p,{}))}),[N]),(0,l.jsxs)("header",{className:"header",children:[d?C:null,(0,l.jsxs)("div",{className:"header__text-container",children:[(0,l.jsx)("p",{className:"header__subtext",children:n}),t&&(0,l.jsx)("p",{className:"header__text ".concat(t.length>15?"header__text_small":""),children:t})]}),(0,l.jsx)("button",{className:"header__button",onClick:c||function(){x(!0)},type:"button",children:u?(0,l.jsx)("img",{className:"header__button-image",src:u,alt:""}):(0,l.jsx)("div",{className:"header__cart",children:(0,l.jsx)("p",{className:"header__cart-counter",children:b})})})]})}}}]);
//# sourceMappingURL=948.efe58889.chunk.js.map